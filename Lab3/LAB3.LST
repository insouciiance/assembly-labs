Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 1
lab3.asm



      1	0000			     STSEG SEGMENT PARA	STACK 'Stack'
      2	0000  40*(????)			 DW 64 DUP (?)
      3	0080			     STSEG ENDS
      4
      5	0000			     DSEG SEGMENT PARA 'Data'
      6	      =000D			 CR EQU	0DH
      7	      =000A			 LF EQU	0AH
      8	      =-8000			 MIN EQU -32768
      9	      =7FFF			 MAX EQU 32767
     10
     11	0000				 XPAR LABEL BYTE
     12	0000  14			 XMAXLEN DB 20
     13	0001  ??			 XLEN DB ?
     14	0002  14*(20) 24		 XFLD DB 20 DUP(' '), '$'
     15
     16	0017				 YPAR LABEL BYTE
     17	0017  14			 YMAXLEN DB 20
     18	0018  ??			 YLEN DB ?
     19	0019  14*(20) 24		 YFLD DB 20 DUP(' '), '$'
     20
     21	002E  45 6E 74 65 72 20	78+	 PROMPTX DB 'Enter x:',	'$'
     22	      3A 24
     23	0037  45 6E 74 65 72 20	79+	 PROMPTY DB 'Enter y:',	'$'
     24	      3A 24
     25	0040  45 6E 74 65 72 65	64+	 ERRORMSG DB 'Entered number was invalid.', '$'
     26	      20 6E 75 6D 62 65	72+
     27	      20 77 61 73 20 69	6E+
     28	      76 61 6C 69 64 2E	24
     29	005C  ????			 NUMX DW ?
     30	005E  ????			 NUMY DW ?
     31	0060  ????			 NUMH DW ?
     32	0062  ????			 NUML DW ?
     33	0064  0001			 POSITION DW 1
     34	0066  000A			 NUMRADIX DW 10
     35
     36	0068  0000			 FUNC1AUX DW 0
     37	006A  0000			 FUNC2DIVISOR DW 0
     38	006C  0002			 FUNC3MULTIPLIER DW 2
     39
     40	006E  0000			 CAST_DIVISOR DW 0
     41	0070  05			 DECIMAL_PRECISION DB 5
     42
     43	0071  ??			 ISERROR DB ?
     44	0072			     DSEG ENDS
     45
     46	0000			     CSEG SEGMENT PARA 'Code'
     47	0000				 BEGIN PROC FAR
     48					 ASSUME	CS:CSEG, DS:DSEG, SS:STSEG
     49	0000  1E			     PUSH DS
     50	0001  B8 0000			     MOV AX, 0
     51	0004  50			     PUSH AX
     52	0005  B8 0000s			     MOV AX, DSEG
     53	0008  8E D8			     MOV DS, AX
     54
     55	000A				     INPUT_X:
     56	000A  C6 06 0071r 00			 MOV ISERROR, 0
     57	000F  E8 005F				 CALL INPUTX
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 2
lab3.asm



     58	0012  80 3E 0071r 00			 CMP ISERROR, 0
     59	0017  7F F1				 JG INPUT_X
     60	0019  E8 007F				 CALL CASTX
     61	001C  80 3E 0071r 00			 CMP ISERROR, 0
     62	0021  7F E7				 JG INPUT_X
     63
     64	0023  83 3E 005Cr FF			 CMP NUMX, -01H
     65	0028  7F 06				 JG CHECKFUNC2
     66	002A  E8 019A				 CALL FUNC3
     67	002D  EB 3A 90				 JMP RETURN_INT
     68	0030					 CHECKFUNC2:
     69	0030  83 3E 005Cr 01			     CMP NUMX, 01H
     70	0035  7F 06				     JG	CHECKFUNC1
     71	0037  E8 0168				     CALL FUNC2
     72	003A  EB 31 90				     JMP RETURN_DECIMAL
     73	003D					     CHECKFUNC1:
     74	003D  83 3E 005Cr 03				 CMP NUMX, 03H
     75	0042  7F 06					 JG INPUT_Y
     76	0044  E8 0132					 CALL FUNC1
     77	0047  EB 24 90					 JMP RETURN_DECIMAL
     78	004A						 INPUT_Y:
     79	004A  C6 06 0071r 00				     MOV ISERROR, 0
     80	004F  E8 0034					     CALL INPUTY
     81	0052  80 3E 0071r 00				     CMP ISERROR, 0
     82	0057  7F F1					     JG	INPUT_Y
     83	0059  E8 00AE					     CALL CASTY
     84	005C  80 3E 0071r 00				     CMP ISERROR, 0
     85	0061  7F E7					     JG	INPUT_Y
     86	0063  E8 0170					     CALL FUNC4
     87	0066  EB 01 90					     JMP RETURN_INT
     88	0069					 RETURN_INT:
     89	0069  E8 01A2				     CALL CASTRESULT
     90	006C  CB				     RET
     91	006D					 RETURN_DECIMAL:
     92	006D  E8 01DC				     CALL CASTDECIMAL
     93	0070  CB				     RET
     94	0071				 BEGIN ENDP
     95
     96	0071				 INPUTX	PROC NEAR
     97	0071  B4 09			     MOV AH, 09
     98	0073  BA 002Er			     LEA DX, PROMPTX
     99	0076  CD 21			     INT 21H
    100
    101	0078  E8 023B			     CALL NEWLINE
    102
    103	007B  B4 0A			     MOV AH, 0AH
    104	007D  BA 0000r			     LEA DX, XPAR
    105	0080  CD 21			     INT 021H
    106
    107	0082  E8 0231			     CALL NEWLINE
    108	0085  C3			     RET
    109	0086				 INPUTX	ENDP
    110
    111	0086				 INPUTY	PROC NEAR
    112	0086  B4 09			     MOV AH, 09
    113	0088  BA 0037r			     LEA DX, PROMPTY
    114	008B  CD 21			     INT 21H
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 3
lab3.asm



    115
    116	008D  E8 0226			     CALL NEWLINE
    117
    118	0090  B4 0A			     MOV AH, 0AH
    119	0092  BA 0017r			     LEA DX, YPAR
    120	0095  CD 21			     INT 021H
    121
    122	0097  E8 021C			     CALL NEWLINE
    123	009A  C3			     RET
    124	009B				 INPUTY	ENDP
    125
    126	009B				 CASTX PROC NEAR
    127	009B  C7 06 005Cr 0000		     MOV NUMX, 0
    128	00A1  C7 06 0064r 0001		     MOV POSITION, 1
    129	00A7  B5 00			     MOV CH, 0
    130	00A9  8A 0E 0001r		     MOV CL, XLEN
    131	00AD  8B D9			     MOV BX, CX
    132	00AF  4B			     DEC BX
    133	00B0  BE 0002r			     LEA SI, XFLD
    134	00B3  8B 04			     MOV AX, [SI]
    135	00B5  3C 2D			     CMP AL, '-'
    136	00B7  75 01			     JNE PROCESS_DIGITX
    137	00B9  49			     DEC CX
    138	00BA				     PROCESS_DIGITX:
    139	00BA  B4 00				 MOV AH, 0
    140	00BC  8A 00				 MOV AL, [SI + BX]
    141	00BE  3C 30				 CMP AL, 030H
    142	00C0  7C 3F				 JL RETURNERRCASTX
    143	00C2  3C 39				 CMP AL, 039H
    144	00C4  7F 3B				 JG RETURNERRCASTX
    145	00C6  2C 30				 SUB AL, 030H
    146	00C8  F7 2E 0064r			 IMUL POSITION
    147	00CC  70 33				 JO RETURNERRCASTX
    148	00CE  01 06 005Cr			 ADD NUMX, AX
    149	00D2  71 0E				 JNO NEXTCASTX
    150	00D4  81 3E 005Cr 8000			 CMP NUMX, MIN
    151	00DA  75 25				 JNE RETURNERRCASTX
    152	00DC  8B 04				 MOV AX, [SI]
    153	00DE  3C 2D				 CMP AL, '-'
    154	00E0  75 1F				 JNE RETURNERRCASTX
    155	00E2					 NEXTCASTX:
    156	00E2  4B				     DEC BX
    157	00E3  83 F9 01				     CMP CX, 1
    158	00E6  74 0E				     JE	PRERETURNCASTX
    159	00E8  A1 0064r				     MOV AX, POSITION
    160	00EB  F7 2E 0066r			     IMUL NUMRADIX
    161	00EF  70 10				     JO	RETURNERRCASTX
    162	00F1  A3 0064r				     MOV POSITION, AX
    163	00F4  E2 C4				     LOOP PROCESS_DIGITX
    164	00F6				     PRERETURNCASTX:
    165	00F6  8B 04				 MOV AX, [SI]
    166	00F8  3C 2D				 CMP AL, '-'
    167	00FA  75 04				 JNE RETURNCASTX
    168	00FC  F7 1E 005Cr			 NEG NUMX
    169	0100				     RETURNCASTX:
    170	0100  C3				 RET
    171	0101				     RETURNERRCASTX:
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 4
lab3.asm



    172	0101  E8 01A7				 CALL PRINTERR
    173	0104  C6 06 0071r 01			 MOV ISERROR, 1
    174	0109  C3				 RET
    175	010A				 CASTX ENDP
    176
    177	010A				 CASTY PROC NEAR
    178	010A  C7 06 005Er 0000		     MOV NUMY, 0
    179	0110  C7 06 0064r 0001		     MOV POSITION, 1
    180	0116  B5 00			     MOV CH, 0
    181	0118  8A 0E 0018r		     MOV CL, YLEN
    182	011C  8B D9			     MOV BX, CX
    183	011E  4B			     DEC BX
    184	011F  BE 0019r			     LEA SI, YFLD
    185	0122  8B 04			     MOV AX, [SI]
    186	0124  3C 2D			     CMP AL, '-'
    187	0126  75 01			     JNE PROCESS_DIGITY
    188	0128  49			     DEC CX
    189	0129				     PROCESS_DIGITY:
    190	0129  B4 00				 MOV AH, 0
    191	012B  8A 00				 MOV AL, [SI + BX]
    192	012D  3C 30				 CMP AL, 030H
    193	012F  7C 3F				 JL RETURNERRCASTY
    194	0131  3C 39				 CMP AL, 039H
    195	0133  7F 3B				 JG RETURNERRCASTY
    196	0135  2C 30				 SUB AL, 030H
    197	0137  F7 2E 0064r			 IMUL POSITION
    198	013B  70 33				 JO RETURNERRCASTY
    199	013D  01 06 005Er			 ADD NUMY, AX
    200	0141  71 0E				 JNO NEXTCASTY
    201	0143  81 3E 005Er 8000			 CMP NUMY, MIN
    202	0149  75 25				 JNE RETURNERRCASTY
    203	014B  8B 04				 MOV AX, [SI]
    204	014D  3C 2D				 CMP AL, '-'
    205	014F  75 1F				 JNE RETURNERRCASTY
    206	0151					 NEXTCASTY:
    207	0151  4B				     DEC BX
    208	0152  83 F9 01				     CMP CX, 1
    209	0155  74 0E				     JE	PRERETURNCASTY
    210	0157  A1 0064r				     MOV AX, POSITION
    211	015A  F7 2E 0066r			     IMUL NUMRADIX
    212	015E  70 10				     JO	RETURNERRCASTY
    213	0160  A3 0064r				     MOV POSITION, AX
    214	0163  E2 C4				     LOOP PROCESS_DIGITY
    215	0165				     PRERETURNCASTY:
    216	0165  8B 04				 MOV AX, [SI]
    217	0167  3C 2D				 CMP AL, '-'
    218	0169  75 04				 JNE RETURNCASTY
    219	016B  F7 1E 005Er			 NEG NUMY
    220	016F				     RETURNCASTY:
    221	016F  C3				 RET
    222	0170				     RETURNERRCASTY:
    223	0170  E8 0138				 CALL PRINTERR
    224	0173  C6 06 0071r 01			 MOV ISERROR, 1
    225	0178  C3				 RET
    226	0179				 CASTY ENDP
    227
    228	0179				 FUNC1 PROC NEAR ; result = 35 / X + X^3
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 5
lab3.asm



    229	0179  B8 0023			     MOV AX, 35
    230	017C  F7 3E 005Cr		     IDIV NUMX
    231	0180  8B 1E 005Cr		     MOV BX, NUMX
    232	0184  89 1E 006Er		     MOV CAST_DIVISOR, BX
    233	0188  89 16 0060r		     MOV NUMH, DX
    234	018C  A3 0068r			     MOV FUNC1AUX, AX
    235	018F  A1 005Cr			     MOV AX, NUMX
    236	0192  F7 2E 005Cr		     IMUL NUMX
    237	0196  F7 2E 005Cr		     IMUL NUMX
    238	019A  03 06 0068r		     ADD AX, FUNC1AUX
    239	019E  A3 0062r			     MOV NUML, AX
    240	01A1  C3			     RET
    241	01A2				 FUNC1 ENDP
    242
    243	01A2				 FUNC2 PROC NEAR ; result = X /	(X^2 + 1)
    244	01A2  A1 005Cr			     MOV AX, NUMX
    245	01A5  F7 2E 005Cr		     IMUL NUMX
    246	01A9  40			     INC AX
    247	01AA  A3 006Ar			     MOV FUNC2DIVISOR, AX
    248	01AD  8B 1E 006Ar		     MOV BX, FUNC2DIVISOR
    249	01B1  89 1E 006Er		     MOV CAST_DIVISOR, BX
    250	01B5  A1 005Cr			     MOV AX, NUMX
    251	01B8  BA 0000			     MOV DX, 0
    252	01BB  F7 3E 006Ar		     IDIV FUNC2DIVISOR
    253	01BF  A3 0062r			     MOV NUML, AX
    254	01C2  89 16 0060r		     MOV NUMH, DX
    255	01C6  C3			     RET
    256	01C7				 FUNC2 ENDP
    257
    258	01C7				 FUNC3 PROC NEAR ; result = 2X
    259	01C7  A1 005Cr			     MOV AX, NUMX
    260	01CA  F7 2E 006Cr		     IMUL FUNC3MULTIPLIER
    261	01CE  89 16 0060r		     MOV NUMH, DX
    262	01D2  A3 0062r			     MOV NUML, AX
    263	01D5  C3			     RET
    264	01D6				 FUNC3 ENDP
    265
    266	01D6				 FUNC4 PROC NEAR ; result = X +	Y
    267	01D6  A1 005Cr			     MOV AX, NUMX
    268	01D9  83 3E 005Er 00		     CMP NUMY, 0
    269	01DE  7D 1B			     JGE ADDY
    270	01E0  F7 1E 005Er		     NEG NUMY
    271	01E4  2B 06 005Er		     SUB AX, NUMY
    272	01E8  A3 0062r			     MOV NUML, AX
    273	01EB  C7 06 0060r 0000		     MOV NUMH, 0
    274	01F1  79 1A			     JNS RETURNFUNC4
    275	01F3  83 1E 0060r 00		     SBB NUMH, 0
    276	01F8  EB 13 90			     JMP RETURNFUNC4
    277	01FB				     ADDY:
    278	01FB  03 06 005Er			 ADD AX, NUMY
    279	01FF  A3 0062r				 MOV NUML, AX
    280	0202  C7 06 0060r 0000			 MOV NUMH, 0
    281	0208  83 16 0060r 00			 ADC NUMH, 0
    282	020D					 RETURNFUNC4:
    283	020D  C3				 RET
    284	020E				 FUNC4 ENDP
    285
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 6
lab3.asm



    286	020E				 CASTRESULT PROC NEAR
    287	020E  83 3E 0060r 00		     CMP NUMH, 0
    288	0213  7D 16			     JGE CAST_1
    289	0215  B0 2D			     MOV AL, '-'
    290	0217  CD 29			     INT 29H
    291	0219  F7 16 0060r		     NOT NUMH
    292	021D  F7 16 0062r		     NOT NUML
    293	0221  83 06 0062r 01		     ADD NUML, 1
    294	0226  83 16 0060r 00		     ADC NUMH, 0
    295	022B				     CAST_1:
    296	022B  B9 0000				 MOV CX, 0
    297	022E  BB 000A				 MOV BX, 0AH
    298	0231  8B 16 0060r			 MOV DX, NUMH
    299	0235  A1 0062r				 MOV AX, NUML
    300	0238				     CAST_2:
    301	0238  F7 FB				 IDIV BX
    302	023A  80 CA 30				 OR DL,	030H
    303	023D  52				 PUSH DX
    304	023E  41				 INC CX
    305	023F  BA 0000				 MOV DX, 0
    306	0242  85 C0				 TEST AX, AX
    307	0244  75 F2				 JNZ CAST_2
    308	0246				     CAST_3:
    309	0246  58				 POP AX
    310	0247  CD 29				 INT 029H
    311	0249  E2 FB				 LOOP CAST_3
    312	024B  C3			     RET
    313	024C				 CASTRESULT ENDP
    314
    315	024C				 CASTDECIMAL PROC NEAR
    316	024C  83 3E 0062r 00		     CMP NUML, 0
    317	0251  7D 08			     JGE CAST_INT1
    318	0253  B0 2D			     MOV AL, '-'
    319	0255  CD 29			     INT 29H
    320	0257  F7 1E 0062r		     NEG NUML
    321	025B				     CAST_INT1:
    322	025B  B9 0000				 MOV CX, 0
    323	025E  BB 000A				 MOV BX, 0AH
    324	0261  A1 0062r				 MOV AX, NUML
    325	0264  BA 0000				 MOV DX, 0
    326	0267				     CAST_INT2:
    327	0267  F7 FB				 IDIV BX
    328	0269  80 CA 30				 OR DL,	030H
    329	026C  52				 PUSH DX
    330	026D  41				 INC CX
    331	026E  BA 0000				 MOV DX, 0
    332	0271  85 C0				 TEST AX, AX
    333	0273  75 F2				 JNZ CAST_INT2
    334	0275				     CAST_INT3:
    335	0275  58				 POP AX
    336	0276  CD 29				 INT 029H
    337	0278  E2 FB				 LOOP CAST_INT3
    338
    339	027A  83 3E 0060r 00		     CMP NUMH, 0
    340	027F  74 29			     JE	DECIMAL_RETURN
    341
    342	0281  B8 002E			     MOV AX, 02EH ; dot(.)
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 7
lab3.asm



    343	0284  CD 29			     INT 029H
    344
    345	0286  A1 0060r			     MOV AX, NUMH
    346	0289				     CAST_DECIMAL1:
    347	0289  F7 2E 0066r			 IMUL NUMRADIX
    348	028D  F7 3E 006Er			 IDIV CAST_DIVISOR
    349	0291  0D 0030				 OR AX,	030H
    350	0294  CD 29				 INT 029H
    351	0296  8B C2				 MOV AX, DX
    352	0298  FE 0E 0070r			 DEC DECIMAL_PRECISION
    353	029C  80 3E 0070r 00			 CMP DECIMAL_PRECISION,	0
    354	02A1  7E 07				 JLE DECIMAL_RETURN
    355	02A3  3D 0000				 CMP AX, 0
    356	02A6  74 02				 JE DECIMAL_RETURN
    357	02A8  EB DF				 JMP CAST_DECIMAL1
    358	02AA				     DECIMAL_RETURN:
    359	02AA  C3				 RET
    360	02AB				 CASTDECIMAL ENDP
    361
    362	02AB				 PRINTERR PROC NEAR
    363	02AB  B4 09			     MOV AH, 09H
    364	02AD  BA 0040r			     LEA DX, ERRORMSG
    365	02B0  CD 21			     INT 021H
    366	02B2  E8 0001			     CALL NEWLINE
    367	02B5  C3			     RET
    368	02B6				 PRINTERR ENDP
    369
    370	02B6				 NEWLINE PROC NEAR
    371	02B6  B2 0D			     MOV DL, CR
    372	02B8  B4 02			     MOV AH, 02h
    373	02BA  CD 21			     INT 21H
    374	02BC  B2 0A			     MOV DL, LF
    375	02BE  B4 02			     MOV AH, 02h
    376	02C0  CD 21			     INT 21H
    377	02C2  C3			     RET
    378	02C3				 NEWLINE ENDP
    379	02C3			     CSEG ENDS
    380				     END BEGIN
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 8
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "12/10/21"
??FILENAME			  Text	 "lab3	  "
??TIME				  Text	 "19:48:09"
??VERSION			  Number 0400
@CPU				  Text	 0101H
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 LAB3
@WORDSIZE			  Text	 2
ADDY				  Near	 CSEG:01FB
BEGIN				  Far	 CSEG:0000
CASTDECIMAL			  Near	 CSEG:024C
CASTRESULT			  Near	 CSEG:020E
CASTX				  Near	 CSEG:009B
CASTY				  Near	 CSEG:010A
CAST_1				  Near	 CSEG:022B
CAST_2				  Near	 CSEG:0238
CAST_3				  Near	 CSEG:0246
CAST_DECIMAL1			  Near	 CSEG:0289
CAST_DIVISOR			  Word	 DSEG:006E
CAST_INT1			  Near	 CSEG:025B
CAST_INT2			  Near	 CSEG:0267
CAST_INT3			  Near	 CSEG:0275
CHECKFUNC1			  Near	 CSEG:003D
CHECKFUNC2			  Near	 CSEG:0030
CR				  Number 000D
DECIMAL_PRECISION		  Byte	 DSEG:0070
DECIMAL_RETURN			  Near	 CSEG:02AA
ERRORMSG			  Byte	 DSEG:0040
FUNC1				  Near	 CSEG:0179
FUNC1AUX			  Word	 DSEG:0068
FUNC2				  Near	 CSEG:01A2
FUNC2DIVISOR			  Word	 DSEG:006A
FUNC3				  Near	 CSEG:01C7
FUNC3MULTIPLIER			  Word	 DSEG:006C
FUNC4				  Near	 CSEG:01D6
INPUTX				  Near	 CSEG:0071
INPUTY				  Near	 CSEG:0086
INPUT_X				  Near	 CSEG:000A
INPUT_Y				  Near	 CSEG:004A
ISERROR				  Byte	 DSEG:0071
LF				  Number 000A
MAX				  Number 7FFF
MIN				  Number -8000
NEWLINE				  Near	 CSEG:02B6
NEXTCASTX			  Near	 CSEG:00E2
NEXTCASTY			  Near	 CSEG:0151
NUMH				  Word	 DSEG:0060
NUML				  Word	 DSEG:0062
NUMRADIX			  Word	 DSEG:0066
NUMX				  Word	 DSEG:005C
NUMY				  Word	 DSEG:005E
POSITION			  Word	 DSEG:0064
PRERETURNCASTX			  Near	 CSEG:00F6
PRERETURNCASTY			  Near	 CSEG:0165
Turbo Assembler	 Version 4.0	    12/10/21 19:48:09	    Page 9
Symbol Table



PRINTERR			  Near	 CSEG:02AB
PROCESS_DIGITX			  Near	 CSEG:00BA
PROCESS_DIGITY			  Near	 CSEG:0129
PROMPTX				  Byte	 DSEG:002E
PROMPTY				  Byte	 DSEG:0037
RETURNCASTX			  Near	 CSEG:0100
RETURNCASTY			  Near	 CSEG:016F
RETURNERRCASTX			  Near	 CSEG:0101
RETURNERRCASTY			  Near	 CSEG:0170
RETURNFUNC4			  Near	 CSEG:020D
RETURN_DECIMAL			  Near	 CSEG:006D
RETURN_INT			  Near	 CSEG:0069
XFLD				  Byte	 DSEG:0002
XLEN				  Byte	 DSEG:0001
XMAXLEN				  Byte	 DSEG:0000
XPAR				  Byte	 DSEG:0000
YFLD				  Byte	 DSEG:0019
YLEN				  Byte	 DSEG:0018
YMAXLEN				  Byte	 DSEG:0017
YPAR				  Byte	 DSEG:0017

Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  02C3 Para	  none	  CODE
DSEG				  16  0072 Para	  none	  DATA
STSEG				  16  0080 Para	  Stack	  STACK
