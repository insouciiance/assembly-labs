Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 1
lab4.asm



      1	0000			     STSEG SEGMENT PARA	STACK 'Stack'
      2	0000  20*(????)			 DW 32 DUP(?)
      3	0040			     STSEG ENDS
      4
      5	0000			     DSEG SEGMENT PARA 'Data'
      6	      =000D			 CR EQU	0DH
      7	      =000A			 LF EQU	0AH
      8
      9	      =-8000			 MIN EQU -32768
     10	      =7FFF			 MAX EQU 32767
     11
     12	0000  45 6E 74 65 72 20	6E+	 PROMPTROWS DB 'Enter number of	rows (max.10):', '$'
     13	      75 6D 62 65 72 20	6F+
     14	      66 20 72 6F 77 73	20+
     15	      28 6D 61 78 2E 31	30+
     16	      29 3A 24
     17	001F  45 6E 74 65 72 20	6E+	 PROMPTCOLS DB 'Enter number of	columns	(max.10):', '$'
     18	      75 6D 62 65 72 20	6F+
     19	      66 20 63 6F 6C 75	6D+
     20	      6E 73 20 28 6D 61	78+
     21	      2E 31 30 29 3A 24
     22	0041  45 6E 74 65 72 65	64+	 ERRORMSG DB 'Entered number was invalid.', '$'
     23	      20 6E 75 6D 62 65	72+
     24	      20 77 61 73 20 69	6E+
     25	      76 61 6C 69 64 2E	24
     26	005D  4E 6F 77 20 65 6E	74+	 INPUTARRAYMSG DB 'Now enter array elements:', '$'
     27	      65 72 20 61 72 72	61+
     28	      79 20 65 6C 65 6D	65+
     29	      6E 74 73 3A 24
     30	0077  45 6E 74 65 72 65	64+	 PRINTARRAYMSG DB 'Entered array:', '$'
     31	      20 61 72 72 61 79	3A+
     32	      24
     33	0086  45 6E 74 65 72 20	6E+	 PROMPTFINDNUM DB 'Enter number	to search:', '$'
     34	      75 6D 62 65 72 20	74+
     35	      6F 20 73 65 61 72	63+
     36	      68 3A 24
     37	009E  49 6E 64 65 78 65	73+	 INCLUSIONSMSG DB 'Indexes of inclusions:', '$'
     38	      20 6F 66 20 69 6E	63+
     39	      6C 75 73 69 6F 6E	73+
     40	      3A 24
     41	00B5  5B 4E 6F 20 6D 61	74+	 NOTFOUNDMSG DB	'[No match]', '$'
     42	      63 68 5D 24
     43
     44	00C0				 ROWSPAR LABEL BYTE
     45	00C0  14			 ROWSMAXLEN DB 20
     46	00C1  ??			 ROWSLEN DB ?
     47	00C2  14*(20) 24		 ROWSFLD DB 20 DUP(' '), '$'
     48
     49	00D7				 COLSPAR LABEL BYTE
     50	00D7  14			 COLSMAXLEN DB 20
     51	00D8  ??			 COLSLEN DB ?
     52	00D9  14*(20) 24		 COLSFLD DB 20 DUP (' '), '$'
     53
     54	00EE				 ARRNUMPAR LABEL BYTE
     55	00EE  14			 ARRNUMMAXLEN DB 20
     56	00EF  ??			 ARRNUMLEN DB ?
     57	00F0  14*(20) 24		 ARRNUMFLD DB 20 DUP(' '), '$'
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 2
lab4.asm



     58
     59	0105				 FINDNUMPAR LABEL BYTE
     60	0105  14			 FINDNUMMAXLEN DB 20
     61	0106  ??			 FINDNUMLEN DB ?
     62	0107  14*(20) 24		 FINDNUMFLD DB 20 DUP (' '), '$'
     63
     64	011C  0000			 ROWSNUM DW 0
     65	011E  0000			 COLSNUM DW 0
     66
     67	0120  64*(????)			 ARRAY DW 100 DUP (?)
     68	01E8  0000			 ARRNUM	DW 0
     69	01EA  0002			 ARRNUM_SIZE DW	2
     70
     71	01EC  0000			 ARRAYI	DW 0
     72	01EE  0000			 ARRAYJ	DW 0
     73	01F0  0000			 ARRAY_OFFSET DW 0
     74
     75	01F2  0000			 FINDNUM DW 0
     76
     77	01F4  ??			 CHAR DB ?
     78
     79	01F5  0001			 POSITION DW 1
     80	01F7  000A			 NUMRADIX DW 10
     81	01F9  0007			 MULTIPLIER DW 7
     82	01FB  00			 ISERROR DB 0
     83	01FC  00			 ISNUMFOUND DB 0
     84	01FD			     DSEG ENDS
     85
     86	0000			     CSEG SEGMENT PARA 'Code'
     87	0000				 BEGIN PROC FAR
     88					     ASSUME CS:CSEG, DS:DSEG, SS:STSEG
     89	0000  1E			     PUSH DS
     90	0001  B8 0000			     MOV AX, 0
     91	0004  50			     PUSH AX
     92	0005  B8 0000s			     MOV AX, DSEG
     93	0008  8E D8			     MOV DS, AX
     94
     95	000A				     INPUT_ROWS:
     96	000A  C6 06 01FBr 00			 MOV ISERROR, 0
     97	000F  E8 0044				 CALL INPUTROWS
     98	0012  E8 01A8				 CALL CASTROWS
     99	0015  80 3E 01FBr 00			 CMP ISERROR, 0
    100	001A  7F EE				 JG INPUT_ROWS
    101	001C					 INPUT_COLS:
    102	001C  C6 06 01FBr 00			     MOV ISERROR, 0
    103	0021  E8 0047				     CALL INPUTCOLS
    104	0024  E8 01FA				     CALL CASTCOLS
    105	0027  80 3E 01FBr 00			     CMP ISERROR, 0
    106	002C  7F EE				     JG	INPUT_COLS
    107	002E					     INPUT_ARR:
    108	002E  C6 06 01FBr 00				 MOV ISERROR, 0
    109	0033  E8 006A					 CALL INPUTARR
    110	0036  80 3E 01FBr 00				 CMP ISERROR, 0
    111	003B  7F F1					 JG INPUT_ARR
    112	003D  E8 02D2					 CALL PRINTARR
    113	0040						 INPUT_FINDNUM:
    114	0040  C6 06 01FBr 00				     MOV ISERROR, 0
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 3
lab4.asm



    115	0045  E8 0043					     CALL INPUTFINDNUM
    116	0048  E8 0103					     CALL CASTFINDNUM
    117	004B  80 3E 01FBr 00				     CMP ISERROR, 0
    118	0050  7F EE					     JG	INPUT_FINDNUM
    119	0052  E8 0230					     CALL PRINTINCLUSIONS
    120	0055  CB				 RET
    121	0056				 BEGIN ENDP
    122
    123	0056				 INPUTROWS PROC	NEAR
    124	0056  B4 09			     MOV AH, 09H
    125	0058  BA 0000r			     LEA DX, PROMPTROWS
    126	005B  CD 21			     INT 21H
    127
    128	005D  E8 0398			     CALL NEWLINE
    129
    130	0060  B4 0A			     MOV AH, 0AH
    131	0062  BA 00C0r			     LEA DX, ROWSPAR
    132	0065  CD 21			     INT 021H
    133
    134	0067  E8 038E			     CALL NEWLINE
    135	006A  C3			     RET
    136	006B				 INPUTROWS ENDP
    137
    138	006B				 INPUTCOLS PROC	NEAR
    139	006B  B4 09			     MOV AH, 09H
    140	006D  BA 001Fr			     LEA DX, PROMPTCOLS
    141	0070  CD 21			     INT 21H
    142
    143	0072  E8 0383			     CALL NEWLINE
    144
    145	0075  B4 0A			     MOV AH, 0AH
    146	0077  BA 00D7r			     LEA DX, COLSPAR
    147	007A  CD 21			     INT 021H
    148
    149	007C  E8 0379			     CALL NEWLINE
    150	007F  C3			     RET
    151	0080				 INPUTCOLS ENDP
    152
    153	0080				 INPUTARRNUM PROC NEAR
    154	0080  B4 0A			     MOV AH, 0AH
    155	0082  BA 00EEr			     LEA DX, ARRNUMPAR
    156	0085  CD 21			     INT 021H
    157
    158	0087  E8 036E			     CALL NEWLINE
    159	008A  C3			     RET
    160	008B				 INPUTARRNUM ENDP
    161
    162	008B				 INPUTFINDNUM PROC NEAR
    163	008B  B4 09			     MOV AH, 09H
    164	008D  BA 0086r			     LEA DX, PROMPTFINDNUM
    165	0090  CD 21			     INT 21H
    166
    167	0092  E8 0363			     CALL NEWLINE
    168
    169	0095  B4 0A			     MOV AH, 0AH
    170	0097  BA 0105r			     LEA DX, FINDNUMPAR
    171	009A  CD 21			     INT 021H
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 4
lab4.asm



    172
    173	009C  E8 0359			     CALL NEWLINE
    174	009F  C3			     RET
    175	00A0				 INPUTFINDNUM ENDP
    176
    177	00A0				 INPUTARR PROC NEAR
    178	00A0  B4 09			     MOV AH, 09H
    179	00A2  BA 005Dr			     LEA DX, INPUTARRAYMSG
    180	00A5  CD 21			     INT 21H
    181	00A7  E8 034E			     CALL NEWLINE
    182
    183	00AA  C7 06 01F0r 0000		     MOV ARRAY_OFFSET, 0
    184	00B0  A1 011Cr			     MOV AX, ROWSNUM
    185	00B3  F7 2E 011Er		     IMUL COLSNUM
    186	00B7  8B C8			     MOV CX, AX
    187	00B9				     INPUT_ARRNUM:
    188	00B9  51				 PUSH CX
    189	00BA  E8 FFC3				 CALL INPUTARRNUM
    190	00BD  E8 001F				 CALL CASTARRNUM
    191	00C0  80 3E 01FBr 00			 CMP ISERROR, 0
    192	00C5  59				 POP CX
    193	00C6  7F 16				 JG RETURN_INPUTARR
    194	00C8					 INPUT_ARRNUM_CONTINUE:
    195	00C8  A1 01E8r				     MOV AX, ARRNUM
    196	00CB  8B 1E 01F0r			     MOV BX, ARRAY_OFFSET
    197	00CF  89 87 0120r			     MOV ARRAY + BX, AX
    198	00D3  FF 06 01F0r			     INC ARRAY_OFFSET
    199	00D7  FF 06 01F0r			     INC ARRAY_OFFSET
    200	00DB  59				     POP CX
    201	00DC  E2 DB				 LOOP INPUT_ARRNUM
    202	00DE				     RETURN_INPUTARR:
    203	00DE  C3				 RET
    204	00DF				 INPUTARR ENDP
    205
    206	00DF				 CASTARRNUM PROC NEAR
    207	00DF  C7 06 01E8r 0000		     MOV ARRNUM, 0
    208	00E5  C7 06 01F5r 0001		     MOV POSITION, 01H
    209	00EB  B5 00			     MOV CH, 0
    210	00ED  8A 0E 00EFr		     MOV CL, ARRNUMLEN
    211	00F1  8B D9			     MOV BX, CX
    212	00F3  4B			     DEC BX
    213	00F4  BE 00F0r			     LEA SI, ARRNUMFLD
    214	00F7  8B 04			     MOV AX, [SI]
    215	00F9  3C 2D			     CMP AL, '-'
    216	00FB  75 01			     JNE PROCESS_DIGIT_CASTARRNUM
    217	00FD  49			     DEC CX
    218	00FE				     PROCESS_DIGIT_CASTARRNUM:
    219	00FE  B4 00				 MOV AH, 0
    220	0100  8A 00				 MOV AL, [SI + BX]
    221	0102  3C 30				 CMP AL, 030H
    222	0104  7C 3F				 JL RETURNERR_CASTARRNUM
    223	0106  3C 39				 CMP AL, 039H
    224	0108  7F 3B				 JG RETURNERR_CASTARRNUM
    225	010A  2C 30				 SUB AL, 030H
    226	010C  F7 2E 01F5r			 IMUL POSITION
    227	0110  70 33				 JO RETURNERR_CASTARRNUM
    228	0112  01 06 01E8r			 ADD ARRNUM, AX
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 5
lab4.asm



    229	0116  71 0E				 JNO NEXT_CASTARRNUM
    230	0118  81 3E 01E8r 8000			 CMP ARRNUM, MIN
    231	011E  75 25				 JNE RETURNERR_CASTARRNUM
    232	0120  8B 04				 MOV AX, [SI]
    233	0122  3C 2D				 CMP AL, '-'
    234	0124  75 1F				 JNE RETURNERR_CASTARRNUM
    235	0126					 NEXT_CASTARRNUM:
    236	0126  4B				     DEC BX
    237	0127  83 F9 01				     CMP CX, 1
    238	012A  74 0E				     JE	PRERETURN_CASTARRNUM
    239	012C  A1 01F5r				     MOV AX, POSITION
    240	012F  F7 2E 01F7r			     IMUL NUMRADIX
    241	0133  70 10				     JO	RETURNERR_CASTARRNUM
    242	0135  A3 01F5r				     MOV POSITION, AX
    243	0138  E2 C4				     LOOP PROCESS_DIGIT_CASTARRNUM
    244	013A					     PRERETURN_CASTARRNUM:
    245	013A  8B 04				 MOV AX, [SI]
    246	013C  3C 2D				 CMP AL, '-'
    247	013E  75 04				 JNE RETURN_CASTARRNUM
    248	0140  F7 1E 01E8r			 NEG ARRNUM
    249	0144				     RETURN_CASTARRNUM:
    250	0144  C3				 RET
    251	0145				     RETURNERR_CASTARRNUM:
    252	0145  E8 02C1				 CALL PRINTERR
    253	0148  C6 06 01FBr 01			 MOV ISERROR, 01H
    254	014D  C3				 RET
    255	014E				 CASTARRNUM ENDP
    256
    257	014E				 CASTFINDNUM PROC NEAR
    258	014E  C7 06 01F2r 0000		     MOV FINDNUM, 0
    259	0154  C7 06 01F5r 0001		     MOV POSITION, 01H
    260	015A  B5 00			     MOV CH, 0
    261	015C  8A 0E 0106r		     MOV CL, FINDNUMLEN
    262	0160  8B D9			     MOV BX, CX
    263	0162  4B			     DEC BX
    264	0163  BE 0107r			     LEA SI, FINDNUMFLD
    265	0166  8B 04			     MOV AX, [SI]
    266	0168  3C 2D			     CMP AL, '-'
    267	016A  75 01			     JNE PROCESS_DIGIT_CASTFINDNUM
    268	016C  49			     DEC CX
    269	016D				     PROCESS_DIGIT_CASTFINDNUM:
    270	016D  B4 00				 MOV AH, 0
    271	016F  8A 00				 MOV AL, [SI + BX]
    272	0171  3C 30				 CMP AL, 030H
    273	0173  7C 3F				 JL RETURNERR_CASTFINDNUM
    274	0175  3C 39				 CMP AL, 039H
    275	0177  7F 3B				 JG RETURNERR_CASTFINDNUM
    276	0179  2C 30				 SUB AL, 030H
    277	017B  F7 2E 01F5r			 IMUL POSITION
    278	017F  70 33				 JO RETURNERR_CASTFINDNUM
    279	0181  01 06 01F2r			 ADD FINDNUM, AX
    280	0185  71 0E				 JNO NEXT_CASTFINDNUM
    281	0187  81 3E 01F2r 8000			 CMP FINDNUM, MIN
    282	018D  75 25				 JNE RETURNERR_CASTFINDNUM
    283	018F  8B 04				 MOV AX, [SI]
    284	0191  3C 2D				 CMP AL, '-'
    285	0193  75 1F				 JNE RETURNERR_CASTFINDNUM
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 6
lab4.asm



    286	0195					 NEXT_CASTFINDNUM:
    287	0195  4B				     DEC BX
    288	0196  83 F9 01				     CMP CX, 1
    289	0199  74 0E				     JE	PRERETURN_CASTFINDNUM
    290	019B  A1 01F5r				     MOV AX, POSITION
    291	019E  F7 2E 01F7r			     IMUL NUMRADIX
    292	01A2  70 10				     JO	RETURNERR_CASTFINDNUM
    293	01A4  A3 01F5r				     MOV POSITION, AX
    294	01A7  E2 C4				     LOOP PROCESS_DIGIT_CASTFINDNUM
    295	01A9					     PRERETURN_CASTFINDNUM:
    296	01A9  8B 04				 MOV AX, [SI]
    297	01AB  3C 2D				 CMP AL, '-'
    298	01AD  75 04				 JNE RETURN_CASTFINDNUM
    299	01AF  F7 1E 01F2r			 NEG FINDNUM
    300	01B3				     RETURN_CASTFINDNUM:
    301	01B3  C3				 RET
    302	01B4				     RETURNERR_CASTFINDNUM:
    303	01B4  E8 0252				 CALL PRINTERR
    304	01B7  C6 06 01FBr 01			 MOV ISERROR, 01H
    305	01BC  C3				 RET
    306	01BD				 CASTFINDNUM ENDP
    307
    308	01BD				 CASTROWS PROC NEAR
    309	01BD  C7 06 011Cr 0000		     MOV ROWSNUM, 0
    310	01C3  C7 06 01F5r 0001		     MOV POSITION, 01H
    311	01C9  B5 00			     MOV CH, 0
    312	01CB  8A 0E 00C1r		     MOV CL, ROWSLEN
    313	01CF  8B D9			     MOV BX, CX
    314	01D1  4B			     DEC BX
    315	01D2  BE 00C2r			     LEA SI, ROWSFLD
    316	01D5  8B 04			     MOV AX, [SI]
    317	01D7  3C 2D			     CMP AL, '-'
    318	01D9  74 3D			     JE	RETURNERR_CASTROWS
    319	01DB				     PROCESS_DIGIT_CASTROWS:
    320	01DB  B4 00				 MOV AH, 0
    321	01DD  8A 00				 MOV AL, [SI + BX]
    322	01DF  3C 30				 CMP AL, 030H
    323	01E1  7C 35				 JL RETURNERR_CASTROWS
    324	01E3  3C 39				 CMP AL, 039H
    325	01E5  7F 31				 JG RETURNERR_CASTROWS
    326	01E7  2C 30				 SUB AL, 030H
    327	01E9  F7 2E 01F5r			 IMUL POSITION
    328	01ED  70 29				 JO RETURNERR_CASTROWS
    329	01EF  01 06 011Cr			 ADD ROWSNUM, AX
    330	01F3  70 23				 JO RETURNERR_CASTROWS
    331	01F5  83 3E 011Cr 0A			 CMP ROWSNUM, 0AH
    332	01FA  7F 1C				 JG RETURNERR_CASTROWS
    333	01FC					 NEXT_CASTROWS:
    334	01FC  4B				     DEC BX
    335	01FD  83 F9 01				     CMP CX, 1
    336	0200  74 0E				     JE	RETURN_CASTROWS
    337	0202  A1 01F5r				     MOV AX, POSITION
    338	0205  F7 2E 01F7r			     IMUL NUMRADIX
    339	0209  70 0D				     JO	RETURNERR_CASTROWS
    340	020B  A3 01F5r				     MOV POSITION, AX
    341	020E  E2 CB				     LOOP PROCESS_DIGIT_CASTROWS
    342	0210				     RETURN_CASTROWS:
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 7
lab4.asm



    343	0210  83 3E 011Cr 00			 CMP ROWSNUM, 0
    344	0215  7E 01				 JLE RETURNERR_CASTROWS
    345	0217  C3				 RET
    346	0218					 RETURNERR_CASTROWS:
    347	0218  E8 01EE				 CALL PRINTERR
    348	021B  C6 06 01FBr 01			 MOV ISERROR, 01H
    349	0220  C3				 RET
    350	0221				 CASTROWS ENDP
    351
    352	0221				 CASTCOLS PROC NEAR
    353	0221  C7 06 011Er 0000		     MOV COLSNUM, 0
    354	0227  C7 06 01F5r 0001		     MOV POSITION, 01H
    355	022D  B5 00			     MOV CH, 0
    356	022F  8A 0E 00D8r		     MOV CL, COLSLEN
    357	0233  8B D9			     MOV BX, CX
    358	0235  4B			     DEC BX
    359	0236  BE 00D9r			     LEA SI, COLSFLD
    360	0239  8B 04			     MOV AX, [SI]
    361	023B  3C 2D			     CMP AL, '-'
    362	023D  74 3D			     JE	RETURNERR_CASTCOLS
    363	023F				     PROCESS_DIGIT_CASTCOLS:
    364	023F  B4 00				 MOV AH, 0
    365	0241  8A 00				 MOV AL, [SI + BX]
    366	0243  3C 30				 CMP AL, 030H
    367	0245  7C 35				 JL RETURNERR_CASTCOLS
    368	0247  3C 39				 CMP AL, 039H
    369	0249  7F 31				 JG RETURNERR_CASTCOLS
    370	024B  2C 30				 SUB AL, 030H
    371	024D  F7 2E 01F5r			 IMUL POSITION
    372	0251  70 29				 JO RETURNERR_CASTCOLS
    373	0253  01 06 011Er			 ADD COLSNUM, AX
    374	0257  70 23				 JO RETURNERR_CASTCOLS
    375	0259  83 3E 011Er 0A			 CMP COLSNUM, 0AH
    376	025E  7F 1C				 JG RETURNERR_CASTCOLS
    377	0260					 NEXT_CASTCOLS:
    378	0260  4B				     DEC BX
    379	0261  83 F9 01				     CMP CX, 1
    380	0264  74 0E				     JE	RETURN_CASTCOLS
    381	0266  A1 01F5r				     MOV AX, POSITION
    382	0269  F7 2E 01F7r			     IMUL NUMRADIX
    383	026D  70 0D				     JO	RETURNERR_CASTCOLS
    384	026F  A3 01F5r				     MOV POSITION, AX
    385	0272  E2 CB				     LOOP PROCESS_DIGIT_CASTCOLS
    386	0274				     RETURN_CASTCOLS:
    387	0274  83 3E 011Er 00			 CMP COLSNUM, 0
    388	0279  7E 01				 JLE RETURNERR_CASTCOLS
    389	027B  C3				 RET
    390	027C					 RETURNERR_CASTCOLS:
    391	027C  E8 018A				 CALL PRINTERR
    392	027F  C6 06 01FBr 01			 MOV ISERROR, 01H
    393	0284  C3				 RET
    394	0285				 CASTCOLS ENDP
    395
    396	0285				 PRINTINCLUSIONS PROC NEAR
    397	0285  B4 09			     MOV AH, 09H
    398	0287  BA 009Er			     LEA DX, INCLUSIONSMSG
    399	028A  CD 21			     INT 021H
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 8
lab4.asm



    400	028C  E8 0169			     CALL NEWLINE
    401
    402	028F  C7 06 01F0r 0000		     MOV ARRAY_OFFSET, 0
    403	0295  8B 0E 011Cr		     MOV CX, ROWSNUM
    404	0299				     CHECK_ROWS:
    405	0299  51				 PUSH CX
    406	029A  A1 011Cr				 MOV AX, ROWSNUM
    407	029D  2B C1				 SUB AX, CX
    408	029F  A3 01ECr				 MOV ARRAYI, AX
    409	02A2  F7 2E 011Er			 IMUL COLSNUM
    410	02A6  F7 2E 01EAr			 IMUL ARRNUM_SIZE
    411	02AA  A3 01F0r				 MOV ARRAY_OFFSET, AX
    412	02AD  8B 0E 011Er			 MOV CX, COLSNUM
    413	02B1					 CHECK_ROW:
    414	02B1  51				     PUSH CX
    415	02B2  A1 011Er				     MOV AX, COLSNUM
    416	02B5  2B C1				     SUB AX, CX
    417	02B7  A3 01EEr				     MOV ARRAYJ, AX
    418	02BA  8B 1E 01F0r			     MOV BX, ARRAY_OFFSET
    419	02BE  8B 87 0120r			     MOV AX, ARRAY + BX
    420	02C2  3B 06 01F2r			     CMP AX, FINDNUM
    421	02C6  75 08				     JNE CHECK_ROW_CONTINUE
    422	02C8  C6 06 01FCr 01			     MOV ISNUMFOUND, 1
    423	02CD  E8 0020				     CALL PRINTARRINDEXES
    424	02D0					     CHECK_ROW_CONTINUE:
    425	02D0  FF 06 01F0r				 INC ARRAY_OFFSET
    426	02D4  FF 06 01F0r				 INC ARRAY_OFFSET
    427	02D8  59					 POP CX
    428	02D9  E2 D6					 LOOP CHECK_ROW
    429	02DB  59				 POP CX
    430	02DC  E2 BB				 LOOP CHECK_ROWS
    431	02DE  80 3E 01FCr 01		     CMP ISNUMFOUND, 1
    432	02E3  74 0A			     JE	PRINTINCLUSIONS_RETURN
    433	02E5  B4 09			     MOV AH, 09H
    434	02E7  BA 00B5r			     LEA DX, NOTFOUNDMSG
    435	02EA  CD 21			     INT 021H
    436	02EC  E8 0109			     CALL NEWLINE
    437	02EF				     PRINTINCLUSIONS_RETURN:
    438	02EF  C3				 RET
    439	02F0				 PRINTINCLUSIONS ENDP
    440
    441	02F0				 PRINTARRINDEXES PROC NEAR
    442	02F0  C6 06 01F4r 5B		     MOV CHAR, '['
    443	02F5  E8 00F7			     CALL PRINTCHAR
    444	02F8  E8 0096			     CALL PRINTROWINDEX
    445	02FB  C6 06 01F4r 20		     MOV CHAR, ' '
    446	0300  E8 00EC			     CALL PRINTCHAR
    447	0303  E8 00BA			     CALL PRINTCOLINDEX
    448	0306  C6 06 01F4r 5D		     MOV CHAR, ']'
    449	030B  E8 00E1			     CALL PRINTCHAR
    450	030E  E8 00E7			     CALL NEWLINE
    451	0311  C3			     RET
    452	0312				 PRINTARRINDEXES ENDP
    453
    454	0312				 PRINTARR PROC NEAR
    455	0312  B4 09			     MOV AH, 09H
    456	0314  BA 0077r			     LEA DX, PRINTARRAYMSG
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 9
lab4.asm



    457	0317  CD 21			     INT 021H
    458	0319  E8 00DC			     CALL NEWLINE
    459
    460	031C  C7 06 01F0r 0000		     MOV ARRAY_OFFSET, 0
    461	0322  8B 0E 011Cr		     MOV CX, ROWSNUM
    462	0326				     PRINT_ROWS:
    463	0326  51				 PUSH CX
    464	0327  A1 011Cr				 MOV AX, ROWSNUM
    465	032A  2B C1				 SUB AX, CX
    466	032C  F7 2E 011Er			 IMUL COLSNUM
    467	0330  F7 2E 01EAr			 IMUL ARRNUM_SIZE
    468	0334  A3 01F0r				 MOV ARRAY_OFFSET, AX
    469	0337  8B 0E 011Er			 MOV CX, COLSNUM
    470	033B					 PRINT_ROW:
    471	033B  51				     PUSH CX
    472	033C  8B 1E 01F0r			     MOV BX, ARRAY_OFFSET
    473	0340  8B 87 0120r			     MOV AX, ARRAY + BX
    474	0344  A3 01E8r				     MOV ARRNUM, AX
    475	0347  E8 0018				     CALL PRINTARRNUM
    476
    477	034A  B2 20				     MOV DL, 020H
    478	034C  B4 02				     MOV AH, 02H
    479	034E  CD 21				     INT 21H
    480
    481	0350  FF 06 01F0r			     INC ARRAY_OFFSET
    482	0354  FF 06 01F0r			     INC ARRAY_OFFSET
    483	0358  59				     POP CX
    484	0359  E2 E0				     LOOP PRINT_ROW
    485	035B  E8 009A			     CALL NEWLINE
    486	035E  59			     POP CX
    487	035F  E2 C5			     LOOP PRINT_ROWS
    488	0361  C3			     RET
    489	0362				 PRINTARR ENDP
    490
    491	0362				 PRINTARRNUM PROC NEAR
    492	0362  83 3E 01E8r 00		     CMP ARRNUM, 0
    493	0367  7D 08			     JGE M1_PRINTARRNUM
    494	0369  B0 2D			     MOV AL, '-'
    495	036B  CD 29			     INT 29H
    496	036D  F7 1E 01E8r		     NEG ARRNUM
    497	0371				     M1_PRINTARRNUM:
    498	0371  B9 0000				 MOV CX, 0
    499	0374  BB 000A				 MOV BX, 0AH
    500	0377  BA 0000				 MOV DX, 0
    501	037A  A1 01E8r				 MOV AX, ARRNUM
    502	037D				     M2_PRINTARRNUM:
    503	037D  F7 FB				 IDIV BX
    504	037F  80 CA 30				 OR DL,	030H
    505	0382  52				 PUSH DX
    506	0383  41				 INC CX
    507	0384  BA 0000				 MOV DX, 0
    508	0387  85 C0				 TEST AX, AX
    509	0389  75 F2				 JNZ M2_PRINTARRNUM
    510	038B				     M3_PRINTARRNUM:
    511	038B  58				 POP AX
    512	038C  CD 29				 INT 029H
    513	038E  E2 FB				 LOOP M3_PRINTARRNUM
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 10
lab4.asm



    514	0390  C3			     RET
    515	0391				 PRINTARRNUM ENDP
    516
    517	0391				 PRINTROWINDEX PROC NEAR
    518	0391  83 3E 01ECr 00		     CMP ARRAYI, 0
    519	0396  7D 08			     JGE M1_PRINTROWINDEX
    520	0398  B0 2D			     MOV AL, '-'
    521	039A  CD 29			     INT 29H
    522	039C  F7 1E 01ECr		     NEG ARRAYI
    523	03A0				     M1_PRINTROWINDEX:
    524	03A0  B9 0000				 MOV CX, 0
    525	03A3  BB 000A				 MOV BX, 0AH
    526	03A6  BA 0000				 MOV DX, 0
    527	03A9  A1 01ECr				 MOV AX, ARRAYI
    528	03AC				     M2_PRINTROWINDEX:
    529	03AC  F7 FB				 IDIV BX
    530	03AE  80 CA 30				 OR DL,	030H
    531	03B1  52				 PUSH DX
    532	03B2  41				 INC CX
    533	03B3  BA 0000				 MOV DX, 0
    534	03B6  85 C0				 TEST AX, AX
    535	03B8  75 F2				 JNZ M2_PRINTROWINDEX
    536	03BA				     M3_PRINTROWINDEX:
    537	03BA  58				 POP AX
    538	03BB  CD 29				 INT 029H
    539	03BD  E2 FB				 LOOP M3_PRINTROWINDEX
    540	03BF  C3			     RET
    541	03C0				 PRINTROWINDEX ENDP
    542
    543	03C0				 PRINTCOLINDEX PROC NEAR
    544	03C0  83 3E 01EEr 00		     CMP ARRAYJ, 0
    545	03C5  7D 08			     JGE M1_PRINTCOLINDEX
    546	03C7  B0 2D			     MOV AL, '-'
    547	03C9  CD 29			     INT 29H
    548	03CB  F7 1E 01EEr		     NEG ARRAYJ
    549	03CF				     M1_PRINTCOLINDEX:
    550	03CF  B9 0000				 MOV CX, 0
    551	03D2  BB 000A				 MOV BX, 0AH
    552	03D5  BA 0000				 MOV DX, 0
    553	03D8  A1 01EEr				 MOV AX, ARRAYJ
    554	03DB				     M2_PRINTCOLINDEX:
    555	03DB  F7 FB				 IDIV BX
    556	03DD  80 CA 30				 OR DL,	030H
    557	03E0  52				 PUSH DX
    558	03E1  41				 INC CX
    559	03E2  BA 0000				 MOV DX, 0
    560	03E5  85 C0				 TEST AX, AX
    561	03E7  75 F2				 JNZ M2_PRINTCOLINDEX
    562	03E9					 M3_PRINTCOLINDEX:
    563	03E9  58				 POP AX
    564	03EA  CD 29				 INT 029H
    565	03EC  E2 FB				 LOOP M3_PRINTCOLINDEX
    566	03EE  C3			     RET
    567	03EF				 PRINTCOLINDEX ENDP
    568
    569	03EF				 PRINTCHAR PROC	NEAR
    570	03EF  8A 16 01F4r		     MOV DL, CHAR
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 11
lab4.asm



    571	03F3  B4 02			     MOV AH, 02H
    572	03F5  CD 21			     INT 21H
    573	03F7  C3			     RET
    574	03F8				 PRINTCHAR ENDP
    575
    576	03F8				 NEWLINE PROC NEAR
    577	03F8  C6 06 01F4r 0D		     MOV CHAR, CR
    578	03FD  E8 FFEF			     CALL PRINTCHAR
    579	0400  C6 06 01F4r 0A		     MOV CHAR, LF
    580	0405  E8 FFE7			     CALL PRINTCHAR
    581	0408  C3			     RET
    582	0409				 NEWLINE ENDP
    583
    584	0409				 PRINTERR PROC NEAR
    585	0409  B4 09			     MOV AH, 09H
    586	040B  BA 0041r			     LEA DX, ERRORMSG
    587	040E  CD 21			     INT 021H
    588	0410  E8 FFE5			     CALL NEWLINE
    589	0413  C3			     RET
    590	0414				 PRINTERR ENDP
    591	0414			     CSEG ENDS
    592				     END BEGIN
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 12
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "16/11/21"
??FILENAME			  Text	 "lab4	  "
??TIME				  Text	 "19:37:55"
??VERSION			  Number 0400
@CPU				  Text	 0101H
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 LAB4
@WORDSIZE			  Text	 2
ARRAY				  Word	 DSEG:0120
ARRAYI				  Word	 DSEG:01EC
ARRAYJ				  Word	 DSEG:01EE
ARRAY_OFFSET			  Word	 DSEG:01F0
ARRNUM				  Word	 DSEG:01E8
ARRNUMFLD			  Byte	 DSEG:00F0
ARRNUMLEN			  Byte	 DSEG:00EF
ARRNUMMAXLEN			  Byte	 DSEG:00EE
ARRNUMPAR			  Byte	 DSEG:00EE
ARRNUM_SIZE			  Word	 DSEG:01EA
BEGIN				  Far	 CSEG:0000
CASTARRNUM			  Near	 CSEG:00DF
CASTCOLS			  Near	 CSEG:0221
CASTFINDNUM			  Near	 CSEG:014E
CASTROWS			  Near	 CSEG:01BD
CHAR				  Byte	 DSEG:01F4
CHECK_ROW			  Near	 CSEG:02B1
CHECK_ROWS			  Near	 CSEG:0299
CHECK_ROW_CONTINUE		  Near	 CSEG:02D0
COLSFLD				  Byte	 DSEG:00D9
COLSLEN				  Byte	 DSEG:00D8
COLSMAXLEN			  Byte	 DSEG:00D7
COLSNUM				  Word	 DSEG:011E
COLSPAR				  Byte	 DSEG:00D7
CR				  Number 000D
ERRORMSG			  Byte	 DSEG:0041
FINDNUM				  Word	 DSEG:01F2
FINDNUMFLD			  Byte	 DSEG:0107
FINDNUMLEN			  Byte	 DSEG:0106
FINDNUMMAXLEN			  Byte	 DSEG:0105
FINDNUMPAR			  Byte	 DSEG:0105
INCLUSIONSMSG			  Byte	 DSEG:009E
INPUTARR			  Near	 CSEG:00A0
INPUTARRAYMSG			  Byte	 DSEG:005D
INPUTARRNUM			  Near	 CSEG:0080
INPUTCOLS			  Near	 CSEG:006B
INPUTFINDNUM			  Near	 CSEG:008B
INPUTROWS			  Near	 CSEG:0056
INPUT_ARR			  Near	 CSEG:002E
INPUT_ARRNUM			  Near	 CSEG:00B9
INPUT_ARRNUM_CONTINUE		  Near	 CSEG:00C8
INPUT_COLS			  Near	 CSEG:001C
INPUT_FINDNUM			  Near	 CSEG:0040
INPUT_ROWS			  Near	 CSEG:000A
ISERROR				  Byte	 DSEG:01FB
ISNUMFOUND			  Byte	 DSEG:01FC
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 13
Symbol Table



LF				  Number 000A
M1_PRINTARRNUM			  Near	 CSEG:0371
M1_PRINTCOLINDEX		  Near	 CSEG:03CF
M1_PRINTROWINDEX		  Near	 CSEG:03A0
M2_PRINTARRNUM			  Near	 CSEG:037D
M2_PRINTCOLINDEX		  Near	 CSEG:03DB
M2_PRINTROWINDEX		  Near	 CSEG:03AC
M3_PRINTARRNUM			  Near	 CSEG:038B
M3_PRINTCOLINDEX		  Near	 CSEG:03E9
M3_PRINTROWINDEX		  Near	 CSEG:03BA
MAX				  Number 7FFF
MIN				  Number -8000
MULTIPLIER			  Word	 DSEG:01F9
NEWLINE				  Near	 CSEG:03F8
NEXT_CASTARRNUM			  Near	 CSEG:0126
NEXT_CASTCOLS			  Near	 CSEG:0260
NEXT_CASTFINDNUM		  Near	 CSEG:0195
NEXT_CASTROWS			  Near	 CSEG:01FC
NOTFOUNDMSG			  Byte	 DSEG:00B5
NUMRADIX			  Word	 DSEG:01F7
POSITION			  Word	 DSEG:01F5
PRERETURN_CASTARRNUM		  Near	 CSEG:013A
PRERETURN_CASTFINDNUM		  Near	 CSEG:01A9
PRINTARR			  Near	 CSEG:0312
PRINTARRAYMSG			  Byte	 DSEG:0077
PRINTARRINDEXES			  Near	 CSEG:02F0
PRINTARRNUM			  Near	 CSEG:0362
PRINTCHAR			  Near	 CSEG:03EF
PRINTCOLINDEX			  Near	 CSEG:03C0
PRINTERR			  Near	 CSEG:0409
PRINTINCLUSIONS			  Near	 CSEG:0285
PRINTINCLUSIONS_RETURN		  Near	 CSEG:02EF
PRINTROWINDEX			  Near	 CSEG:0391
PRINT_ROW			  Near	 CSEG:033B
PRINT_ROWS			  Near	 CSEG:0326
PROCESS_DIGIT_CASTARRNUM	  Near	 CSEG:00FE
PROCESS_DIGIT_CASTCOLS		  Near	 CSEG:023F
PROCESS_DIGIT_CASTFINDNUM	  Near	 CSEG:016D
PROCESS_DIGIT_CASTROWS		  Near	 CSEG:01DB
PROMPTCOLS			  Byte	 DSEG:001F
PROMPTFINDNUM			  Byte	 DSEG:0086
PROMPTROWS			  Byte	 DSEG:0000
RETURNERR_CASTARRNUM		  Near	 CSEG:0145
RETURNERR_CASTCOLS		  Near	 CSEG:027C
RETURNERR_CASTFINDNUM		  Near	 CSEG:01B4
RETURNERR_CASTROWS		  Near	 CSEG:0218
RETURN_CASTARRNUM		  Near	 CSEG:0144
RETURN_CASTCOLS			  Near	 CSEG:0274
RETURN_CASTFINDNUM		  Near	 CSEG:01B3
RETURN_CASTROWS			  Near	 CSEG:0210
RETURN_INPUTARR			  Near	 CSEG:00DE
ROWSFLD				  Byte	 DSEG:00C2
ROWSLEN				  Byte	 DSEG:00C1
ROWSMAXLEN			  Byte	 DSEG:00C0
ROWSNUM				  Word	 DSEG:011C
ROWSPAR				  Byte	 DSEG:00C0
Turbo Assembler	 Version 4.0	    16/11/21 19:37:55	    Page 14
Symbol Table




Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  0414 Para	  none	  CODE
DSEG				  16  01FD Para	  none	  DATA
STSEG				  16  0040 Para	  Stack	  STACK
